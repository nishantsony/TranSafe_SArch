{
    "type": "Ext.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "signuppanel",
        "designer|userClassName": "SignUpPanel",
        "id": "signuppanel",
        "modal": false,
        "scrollable": true,
        "style": "background-color: #FFF"
    },
    "designerId": "84a0048a-1dd5-4977-a25f-8ec8d96cd0a4",
    "cn": [
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "title": "Please, authorise"
            },
            "designerId": "ae5b60e2-e127-4124-b3fe-237d28567f92",
            "cn": [
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": 1,
                        "id": "signInUsernameField1",
                        "label": "Login",
                        "margin": null,
                        "padding": 2,
                        "style": "'border-color: blue; border-style: solid;',"
                    },
                    "designerId": "3487a8f1-e771-4adb-98af-e765966676cc"
                },
                {
                    "type": "Ext.field.Password",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": 1,
                        "id": "signInPasswordField1",
                        "label": "Password",
                        "labelAlign": null,
                        "style": "'border-color: blue; border-style: solid;',"
                    },
                    "designerId": "989724b1-48a4-4877-b3d6-3cfb808f3d2c"
                },
                {
                    "type": "Ext.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "action-round",
                        "docked": "bottom",
                        "text": "Submit",
                        "ui": "action-round"
                    },
                    "designerId": "7923d05c-ae00-4d7a-8508-22fe66498803",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "button",
                                    "e"
                                ],
                                "fn": "handler",
                                "implHandler": [
                                    "var username = Ext.getCmp('signInUsernameField1').getValue();",
                                    "var pass = Ext.getCmp('signInPasswordField1').getValue();",
                                    "console.log('Username: ' + username );",
                                    "console.log('Password: ' + pass );",
                                    "",
                                    "Ext.data.JsonP.request({",
                                    "",
                                    "     url: 'http://115.146.86.216:8080/TransNet/services/SurveyBO/Login',",
                                    "   // method: 'POST',",
                                    "   // dataType: 'json',",
                                    "     params: {",
                                    "         username: username,",
                                    "         pass: pass,",
                                    "         format: 'json',",
                                    "         response: 'application/jsonp'",
                                    "             },",
                                    "      callbackKey: 'callback',",
                                    "                    success: function (response) {",
                                    "                        alert('Working!');",
                                    "                        console.log(response);",
                                    "                        if(response['return'] === undefined || response['return'] == 'Invalid User')",
                                    "                            return;",
                                    "                        if(response['return'] != 'Invalid User' || response['return'] !== undefined || response.responseBytes !== null){",
                                    "                            console.log(response['return']);",
                                    "                            localStorage.setItem('ifLogged', response['return']);",
                                    "                            localStorage.setItem('username', username);",
                                    "                            console.log(localStorage.getItem('ifLogged'));",
                                    "                        }",
                                    "                        console.log('prevView is:' + localStorage.getItem('prevView'));",
                                    "                         Ext.Viewport.setActiveItem(localStorage.getItem('prevView'),{",
                                    "                            type: \"slide\",",
                                    "                            direction: \"left\"",
                                    "                        });",
                                    "                    },",
                                    "                    failure: function (response) {",
                                    "                        alert('Not working!');",
                                    "                        console.log(response);",
                                    "                    },",
                                    "     callback: function(successful, data){",
                                    "     alert(data);",
                                    " }",
                                    "               });",
                                    ""
                                ]
                            },
                            "designerId": "50f21d9a-644d-41ff-9f46-4ed9eaf7684b"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.Label",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "html": "Or sign up"
            },
            "designerId": "30f1c5b8-70f3-4206-b4de-e59b85b3ad2b"
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "title": "Choose login and password"
            },
            "designerId": "f1b67d95-752b-4c1f-af33-8b182e7991b4",
            "cn": [
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": 1,
                        "id": "signUpUsernameField",
                        "label": "Login",
                        "labelWidth": "35%",
                        "padding": null,
                        "style": "'border-color: blue; border-style: solid;',"
                    },
                    "designerId": "6778d2c3-9c6a-44dd-9973-580ded487d19"
                },
                {
                    "type": "Ext.field.Password",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": 1,
                        "id": "signUpPasswordField",
                        "label": "Password",
                        "labelAlign": null,
                        "labelWidth": "35%",
                        "padding": null,
                        "style": "'border-color: blue; border-style: solid;',"
                    },
                    "designerId": "f2120c8c-e878-466a-939c-3540483768e4"
                }
            ]
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "title": "Tell us about yourself"
            },
            "designerId": "ba8f12be-9498-40dd-905e-af04b1ec49d4",
            "cn": [
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": 1,
                        "id": "emailField",
                        "label": "Email",
                        "padding": "",
                        "style": "'border-color: blue; border-style: solid;'"
                    },
                    "designerId": "7af4c42b-d1b3-429a-a588-39c21d0de424"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": 1,
                        "designer|uiInterfaceName": "number",
                        "id": "ageField",
                        "label": "Age",
                        "padding": "",
                        "style": "'border-color: blue; border-style: solid;',",
                        "ui": "number"
                    },
                    "designerId": "7fdbe8d5-afdb-4e2f-86b1-fb3c59768b6e"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": 1,
                        "id": "occupationField",
                        "label": "Role",
                        "padding": null,
                        "style": "'border-color: blue; border-style: solid;',"
                    },
                    "designerId": "e6f4f1ce-4f21-42e0-b9e1-76f25f3f7df3"
                },
                {
                    "type": "Ext.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "border": 1
                    },
                    "designerId": "b5f57269-4355-42a4-b2ed-cc1cdcdf624d",
                    "cn": [
                        {
                            "type": "Ext.field.Radio",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "border": 1,
                                "docked": "left",
                                "label": "Male",
                                "labelAlign": null,
                                "labelWidth": "60%",
                                "minWidth": "50%",
                                "name": "gender",
                                "style": "'border-color: blue; border-style: solid;',",
                                "value": "male"
                            },
                            "designerId": "c8521609-9a06-479f-adc3-5e0cc3f877ba"
                        },
                        {
                            "type": "Ext.field.Radio",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "border": 1,
                                "centered": false,
                                "docked": "right",
                                "label": "Female",
                                "labelAlign": "right",
                                "labelWidth": "50%",
                                "labelWrap": true,
                                "minWidth": "50%",
                                "name": "gender",
                                "style": "'border-color: blue; border-style: solid;',",
                                "value": "female"
                            },
                            "designerId": "2f386365-7d3a-4200-a7a3-2bf05fb0c1f7"
                        }
                    ]
                },
                {
                    "type": "Ext.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|uiInterfaceName": "action-round",
                        "docked": "bottom",
                        "text": "Submit",
                        "ui": "action-round"
                    },
                    "designerId": "9073b3c8-b944-42dc-ad8e-c8dfb89aa32f",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "button",
                                    "e"
                                ],
                                "fn": "handler",
                                "implHandler": [
                                    "var login = Ext.getCmp('signUpUsernameField').getValue();",
                                    "var pass = Ext.getCmp('signUpPasswordField').getValue();",
                                    "var email = Ext.getCmp('emailField').getValue();",
                                    "var gender = Ext.ComponentQuery.query('radiofield[name=gender]')[0].getGroupValue();",
                                    "var age = Ext.getCmp('ageField').getValue();",
                                    "var occupation = Ext.getCmp('occupationField').getValue();",
                                    "console.log('Username: ' + login);",
                                    "console.log('Password: ' + pass);",
                                    "console.log('email: ' + email);",
                                    "console.log('age: ' + age);",
                                    "console.log('occupation: ' + occupation);",
                                    "console.log('gender: ' + gender);",
                                    "",
                                    "Ext.data.JsonP.request({",
                                    "",
                                    "     url: 'http://115.146.86.216:8080/TransNet/services/SurveyBO/CreateUser',",
                                    "     params: {",
                                    "         username: login,",
                                    "         password: pass,",
                                    "         email: email,",
                                    "         gender: gender,",
                                    "         age: age,",
                                    "         occupation: occupation,",
                                    "         format: 'json',",
                                    "         response: 'application/jsonp'",
                                    "             },",
                                    "     callbackKey: 'callback',",
                                    "                    success: function (response) {",
                                    "                        alert('Working!');",
                                    "                        console.log(response);",
                                    "                        if(response['return'] != 'Invalid User'){",
                                    "                            localStorage.setItem('ifLogged', response['return']);",
                                    "                        localStorage.setItem('username', login);",
                                    "                            Ext.Viewport.setActiveItem(localStorage.getItem('prevView'),{",
                                    "                            type: \"slide\",",
                                    "                            direction: \"left\"",
                                    "                        });",
                                    "                        }",
                                    "                        else{",
                                    "                            console.log('the user is invalid');",
                                    "                            alert('Sorry, these user details cannot be used, try again with another details');",
                                    "                        }",
                                    "                    },",
                                    "                    failure: function (response) {",
                                    "                        alert('Not working!');",
                                    "                        console.log(response);",
                                    "                    },",
                                    "     callback: function(successful, data){",
                                    "     alert(data);",
                                    " }",
                                    "               });"
                                ]
                            },
                            "designerId": "b4d2094c-bae2-4db6-bd14-5fe56497f29b"
                        }
                    ]
                }
            ]
        },
        {
            "type": "linkedinstance",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "designerId": "a97f812b-f4f9-4c8c-bc07-b57c55a3f7a8",
            "masterInstanceId": "b18eae63-e580-4593-977f-4eb128b04fc8"
        }
    ]
}